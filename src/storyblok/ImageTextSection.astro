---
import Headline from '../components/Headline.astro'
import { renderRichText } from '@storyblok/astro'
import { storyblokEditable } from '@storyblok/astro'
import StoryblokComponent from '@storyblok/astro/StoryblokComponent.astro'
import { Image } from '@astrojs/image/components'

const { blok, index } = Astro.props

const renderedRichText = renderRichText(blok.text)
---

<section
  {...storyblokEditable(blok)}
  class="page-section container grid grid-cols-2 gap-12"
>
  <div>
    {index}
    <Headline tag="h1" margin="small">{blok.headline}</Headline>
    <section
      class="prose prose-stone dark:prose-invert leading-relaxed mb-8"
      set:html={renderedRichText}
    >
    </section>
    {blok.button[0] && <StoryblokComponent blok={blok.button[0]} />}
  </div>
  <div class="relative">
    {
      blok.image?.filename && (
        <Image
          class="pointer-events-none sticky top-48 rounded-lg shadow-lg"
          alt={blok.image.alt}
          src={blok.image.filename + '/m/1000x0'}
          width="1000"
          aspectRatio={3 / 2}
        />
      )
    }
  </div>
</section>
